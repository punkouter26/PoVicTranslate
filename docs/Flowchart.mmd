flowchart TD
    Start([User Opens Translation Page]) --> Input[Enter Modern English Text]
    
    Input --> Validate{Text Length<br/>Valid?}
    Validate -->|No| ShowError[Display Validation Error]
    ShowError --> Input
    
    Validate -->|Yes| ClickTranslate[User Clicks Translate Button]
    
    ClickTranslate --> ShowLoading[Display Loading Spinner]
    ShowLoading --> APICall[HTTP POST to /api/translation/translate]
    
    APICall --> ServerValidate{Server<br/>Validation}
    ServerValidate -->|Invalid| Return400[Return 400 Bad Request]
    Return400 --> HideLoading1[Hide Loading Spinner]
    HideLoading1 --> DisplayError1[Display Error Message]
    DisplayError1 --> Input
    
    ServerValidate -->|Valid| LogRequest[Log Translation Request]
    LogRequest --> CallService[Call TranslationService]
    
    CallService --> StartTimer[Start Performance Timer]
    StartTimer --> BuildPrompt[Build OpenAI Prompt:<br/>System: Victorian English<br/>User: Input text]
    
    BuildPrompt --> CallOpenAI[Call Azure OpenAI API]
    CallOpenAI --> CheckOpenAI{OpenAI<br/>Success?}
    
    CheckOpenAI -->|Error| LogError[Log Error to Application Insights]
    LogError --> TrackFailure[Track Failed Translation Telemetry]
    TrackFailure --> Return500[Return 500 Internal Server Error]
    Return500 --> HideLoading2[Hide Loading Spinner]
    HideLoading2 --> DisplayError2[Display Service Error]
    DisplayError2 --> Input
    
    CheckOpenAI -->|Success| StopTimer[Stop Performance Timer]
    StopTimer --> LogSuccess[Log Successful Translation]
    LogSuccess --> TrackSuccess[Track Successful Translation Telemetry:<br/>InputLength, OutputLength,<br/>ProcessingTimeMs]
    
    TrackSuccess --> BuildResponse[Build TranslationResponse:<br/>originalText, translatedText,<br/>timestamp, processingTimeMs]
    
    BuildResponse --> Return200[Return 200 OK with JSON]
    Return200 --> HideLoading3[Hide Loading Spinner]
    HideLoading3 --> DisplayResult[Display Victorian English Translation]
    
    DisplayResult --> UserActions{User Action}
    UserActions -->|Copy Translation| CopyToClipboard[Copy to Clipboard]
    UserActions -->|Clear| ClearForm[Clear Form]
    UserActions -->|New Translation| Input
    UserActions -->|Navigate Away| End([End])
    
    CopyToClipboard --> ShowCopyConfirmation[Show Copy Confirmation]
    ShowCopyConfirmation --> UserActions
    
    ClearForm --> Input
    
    style Start fill:#e8f5e9
    style End fill:#ffebee
    style ShowError fill:#fff3e0
    style DisplayError1 fill:#fff3e0
    style DisplayError2 fill:#fff3e0
    style DisplayResult fill:#e1f5ff
    style ShowLoading fill:#f3e5f5
    style CallOpenAI fill:#ede7f6
    style TrackSuccess fill:#e0f2f1
    style LogSuccess fill:#e0f2f1
