graph TB
    subgraph "Internet"
        User[Users/Browsers]
        CDN[Azure CDN<br/>Static Assets]
    end
    
    subgraph "Azure Resource Group: PoVicTranslate"
        subgraph "Compute"
            AppService[Azure App Service<br/>PoVicTranslate<br/>Linux B1 Plan]
            AppPlan[App Service Plan<br/>Shared PoShared Plan<br/>B1 Basic]
        end
        
        subgraph "AI & Cognitive Services"
            OpenAI[Azure OpenAI Service<br/>GPT-4o Deployment<br/>East US]
            Speech[Azure Speech Service<br/>Standard Tier<br/>East US 2]
        end
        
        subgraph "Monitoring & Analytics"
            AppInsights[Application Insights<br/>Performance Monitoring<br/>Telemetry Collection]
            LogAnalytics[Log Analytics Workspace<br/>Centralized Logging]
        end
        
        subgraph "Networking & Security"
            KeyVault[Azure Key Vault<br/>Secrets Management<br/>API Keys Storage]
            VNet[Virtual Network<br/>Private Communication<br/>Service Endpoints]
        end
        
        subgraph "Storage & Data"
            Storage[Azure Storage Account<br/>Static Files<br/>Debug Logs Backup]
            FileShare[Azure File Share<br/>Application Logs<br/>DEBUG Folder]
        end
    end
    
    subgraph "Development & Deployment"
        GitHub[GitHub Repository<br/>Source Code<br/>CI/CD Workflows]
        AZD[Azure Developer CLI<br/>azd up deployment<br/>Infrastructure as Code]
        DevMachine[Developer Machine<br/>Visual Studio Code<br/>Local Development]
    end
    
    %% User Flow
    User -->|HTTPS| AppService
    User -->|Static Assets| CDN
    CDN -->|Cache Miss| AppService
    
    %% Application Dependencies
    AppService -.->|Hosted on| AppPlan
    AppService -.->|Translation API| OpenAI
    AppService -.->|Text-to-Speech| Speech
    AppService -.->|Telemetry| AppInsights
    AppService -.->|Secrets| KeyVault
    AppService -.->|Log Files| Storage
    
    %% Monitoring Connections
    AppInsights -.->|Logs & Metrics| LogAnalytics
    AppService -.->|Application Logs| LogAnalytics
    
    %% Security & Networking
    AppService -.->|Private Endpoint| VNet
    OpenAI -.->|Service Endpoint| VNet
    Speech -.->|Service Endpoint| VNet
    KeyVault -.->|Private Link| VNet
    
    %% Storage Connections
    AppService -.->|Debug Logs| FileShare
    FileShare -.->|Backup| Storage
    
    %% Development Workflow
    DevMachine -.->|Push Code| GitHub
    GitHub -.->|GitHub Actions| AppService
    DevMachine -.->|Deploy| AZD
    AZD -.->|Provision & Deploy| AppService
    
    %% Configuration Flow
    subgraph "Configuration Sources"
        AppSettings[App Service<br/>Application Settings]
        EnvVars[Environment Variables<br/>Runtime Configuration]
        LocalSettings[appsettings.json<br/>Development Only]
    end
    
    KeyVault -.->|Secure Values| AppSettings
    AppSettings -.->|Runtime Config| AppService
    LocalSettings -.->|Dev Config| DevMachine
    
    %% Data Flow Details
    subgraph "API Communication Flow"
        Request[HTTP Request] --> Middleware[Debug Middleware]
        Middleware --> Controller[API Controllers]
        Controller --> Service[Business Services]
        Service --> Azure[Azure AI Services]
        Azure --> Response[HTTP Response]
    end
    
    AppService -.->|Contains| Request
    
    %% Scaling and Availability
    subgraph "High Availability"
        LoadBalancer[Azure Load Balancer<br/>Traffic Distribution]
        AutoScale[Auto Scaling Rules<br/>CPU/Memory Based]
        HealthCheck[Health Check Endpoint<br/>/healthz]
    end
    
    User -.->|Traffic| LoadBalancer
    LoadBalancer -.->|Route| AppService
    AppService -.->|Scale Rules| AutoScale
    AppService -.->|Health| HealthCheck
    
    %% Cost Optimization
    subgraph "Shared Resources"
        SharedPlan[PoShared Resource Group<br/>Shared App Service Plan<br/>Cost Optimization]
        SharedServices[Shared AI Services<br/>Cross-Application Usage]
    end
    
    AppPlan -.->|Uses| SharedPlan
    OpenAI -.->|Shared| SharedServices
    Speech -.->|Shared| SharedServices
    
    %% Regions and Compliance
    subgraph "Geographic Distribution"
        EastUS[East US Region<br/>Primary Deployment<br/>OpenAI Service]
        EastUS2[East US 2 Region<br/>Speech Service<br/>Backup Location]
    end
    
    AppService -.->|Deployed in| EastUS
    OpenAI -.->|Located in| EastUS
    Speech -.->|Located in| EastUS2
    
    %% Styling
    classDef user fill:#e3f2fd,stroke:#1976d2,stroke-width:3px
    classDef compute fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef ai fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef monitoring fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef security fill:#ffebee,stroke:#d32f2f,stroke-width:2px
    classDef storage fill:#f9fbe7,stroke:#689f38,stroke-width:2px
    classDef development fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    classDef shared fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px
    
    class User,CDN user
    class AppService,AppPlan,LoadBalancer,AutoScale,HealthCheck compute
    class OpenAI,Speech ai
    class AppInsights,LogAnalytics monitoring
    class KeyVault,VNet security
    class Storage,FileShare storage
    class GitHub,AZD,DevMachine,AppSettings,EnvVars,LocalSettings development
    class SharedPlan,SharedServices shared
